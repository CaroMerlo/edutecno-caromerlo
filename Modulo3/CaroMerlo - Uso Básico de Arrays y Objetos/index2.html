<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Centro Médico Ñuñoa Parte 2</title>
    <style>
        table {
            table-layout: fixed;
            width: 90%;
            border-collapse: collapse;
            border: 3px solid black;
            margin-left: 5%;
            text-align: center;
        }

        thead th:nth-child(1) {
            width: 30%;
        }

        th {
            background-color: #e6f2f7;
            border: 1px solid black;
        }

        td {
            border: 1px solid black;
            border-collapse: collapse;
            height: 20px;
        }

        .espacio {
            height: 5px;
        }

        .espacio2 {
            height: 30px;
        }
    </style>

</head>

<body>
    <div id="ulListDental" style="margin-left: 30px;">
        <h2>Listado Dental</h2>
    </div>
    <br>
    <div id="ulListPaciente" style="margin-left: 30px;">
        <h2>Lista de Pacientes</h2>
    </div>

    <div id="ulListPreIsapre" style="margin-left: 30px;">
        <h2>Lista de Pacientes Dental - Isapre</h2>
    </div>

    <div id="ulListPreFonasa" style="margin-left: 30px;">
        <h2>Lista de Pacientes Traumatologia - Fonasa</h2>
    </div>

    <script>
        var especialidad = [
            {
                nombre: 'Radiología', agenda: [
                    { hora: '11:00', especialista: 'IGNACIO SCHULZ', paciente: 'FRANCISCA ROJAS', rut: '9878782-1', prevision: 'FONASA' },
                    { hora: '11:30', especialista: 'FEDERICO SUBERCASEAUX', paciente: 'PAMELA ESTRADA', rut: '15345241-3', prevision: 'ISAPRE' },
                    { hora: '15:00', especialista: 'FERNANDO WURTHZ', paciente: 'ARMANDO LUNA', rut: '16445345-9', prevision: 'ISAPRE' },
                    { hora: '15:30', especialista: 'ANA MARIA GODOY', paciente: 'MANUEL GODOY', rut: '17666419-0', prevision: 'FONASA' },
                    { hora: '16:00', especialista: 'PATRICIA SUAZO', paciente: 'RAMON ULLOA', rut: '14989389-K', prevision: 'FONASA' },
                ]
            },
            {
                nombre: 'Dental', agenda: [
                    { hora: '8:30', especialista: 'ANDREA ZUÑIGA', paciente: 'MARCELA RETAMAL', rut: '9878782-1', prevision: 'ISAPRE' },
                    { hora: '11:00', especialista: 'MARIA PIA ZAÑARTU', paciente: 'ANGEL MUÑOZ', rut: '9878782-1', prevision: 'ISAPRE' },
                    { hora: '11:30', especialista: 'SCARLETT WITTING', paciente: 'MARIO KAST', rut: '7998789-5', prevision: 'FONASA' },
                    { hora: '13:00', especialista: 'FRANCISCO VON TEUBER', paciente: 'KARIN FERNANDEZ', rut: '18887662-K', prevision: 'FONASA' },
                    { hora: '13:30', especialista: 'EDUARDO VIÑUELA', paciente: 'HUGO SANCHEZ', rut: '17665461-4', prevision: 'FONASA' },
                    { hora: '14:30', especialista: 'RAQUEL VILLASECA', paciente: 'ANA SEPULVEDA', rut: '14441281-0', prevision: 'ISAPRE' }

                ]
            },
            {
                nombre: 'Traumatologia', agenda: [
                    { hora: '08:00', especialista: 'MARIA PAZ ALTUZARRA', paciente: 'PAULA SANCHEZ', rut: '15554774-5', prevision: 'FONASA' },
                    { hora: '10:00', especialista: 'RAUL ARAYA', paciente: 'ANGÉLICA NAVAS', rut: '15444147-9', prevision: 'ISAPRE' },
                    { hora: '10:30', especialista: 'MARIA ARRIAGADA', paciente: 'ANA KLAPP', rut: '17879423-9', prevision: 'ISAPRE' },
                    { hora: '11:00', especialista: 'ALEJANDRO BADILLA', paciente: 'FELIPE MARDONES', rut: '17879423-9', prevision: 'ISAPRE' },
                ]
            }];

        var entries = Object.entries(especialidad);
        console.log(especialidad);

        //Agegar item con Puch
        especialidad[2].agenda.push({ hora: '09:00', especialista: 'RENÉ POBLETE', paciente: 'ANA GELLONA', rut: '13123329-7', prevision: 'ISAPRE' },
            { hora: '09:30', especialista: 'MARIA SOLAR', paciente: 'RAMIRO ANDRADE', rut: '12221451-K', prevision: 'FONASA' },
            { hora: '10:00 ', especialista: 'RAUL LOYOLA', paciente: 'CARMEN ISLA', rut: '10112348-3', prevision: 'ISAPRE' },
            { hora: '10:30 ', especialista: 'ANTONIO LARENAS', paciente: 'PABLO LOAYZA', rut: '13453234-1', prevision: 'ISAPRE' },
            { hora: '12:00', especialista: 'MATIAS ARAVENA', paciente: 'SUSANA POBLETE', rut: '14345656-6', prevision: 'FONASA' });

        //Eliminar registros.
        especialidad[0].agenda.shift();
        especialidad[0].agenda.pop();


        function listadoDental() {
            var lista = document.getElementById("ulListDental");
            especialidad[1].agenda.forEach(function (data, index) {
                var linew = document.createElement("li");
                var contenido = document.createTextNode(data.hora + ' - ' + data.especialista + " - " + data.paciente + " - " + data.rut + " - " + data.prevision);
                lista.appendChild(linew);
                linew.appendChild(contenido);

            })
        }
        listadoDental();

        function listadoPacientes() {
            var lista = document.getElementById("ulListPaciente");
            for (var i = 0; i < especialidad.length; i++) {

                especialidad[i].agenda.forEach(function (data, index) {
                    var linew = document.createElement("li");
                    var contenido = document.createTextNode(data.paciente);
                    lista.appendChild(linew);
                    linew.appendChild(contenido);
                })
            };

        }
        listadoPacientes();

        function listadoPrevision(i, previ, listPrev) {

            var lista = document.getElementById(listPrev);
            var isapre = especialidad[i].agenda.filter(function (especialidad) {
                return especialidad.prevision == previ
                 });
                
                isapre.forEach(function (data, index) {
                var linew = document.createElement("li");
                    var contenido = document.createTextNode(data.paciente + " - " + data.prevision);
                    lista.appendChild(linew);
                    linew.appendChild(contenido);


                })           
        }

        listadoPrevision(1, 'ISAPRE','ulListPreIsapre');
        listadoPrevision(2, 'FONASA','ulListPreFonasa');

    </script>
</body>

</html